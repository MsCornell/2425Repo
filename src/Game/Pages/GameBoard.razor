@page "/GameBoard"
@using Logic
<PageTitle>Ultimate-tic-tac-toe Game</PageTitle>

<h2>
    @if (game.Winner == GameResult.InProgress)
    {
        @($"Current Turn: {game.NextPlayer}")
    }
    else
    {
        @GetOverallWinner()
    }
</h2>

<div class="ultimate-tic-tac-toe">
    @foreach (BoardIndex board in Enum.GetValues(typeof(BoardIndex)))
    {
        <div class="board @(IsBoardPlayable(board) ? "active-board" : "") @(IsWinningLine(board) ? GetBoardStyle(board) : "")">
            @foreach (CellIndex cell in Enum.GetValues(typeof(CellIndex)))
            {
                <div class="cell-container @(GetCellStyle(board, cell))">
                    <a href="javascript:void(0);" @onclick="() => Play(board, cell)">
                        <img src="@GetCellImage(board, cell)" class="cell" />
                    </a>
                </div>
            }
        </div>
    }
</div>

<div class="menu-item">
    <button class="btn" @onclick="ConfirmAndGoToHomePage">Return to Home</button>
</div>

<style>

    body {
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background-color: #809ED3; 
        overflow: hidden;
        font-family: 'Rubik', sans-serif;
    }

    .ultimate-tic-tac-toe {
        display: grid;
        grid-template-columns: repeat(3, 1fr); /* Use 1fr for equal spacing */
        gap: 10px;
    }

    .board {
        display: grid;
        grid-template-columns: repeat(3, 1fr); /* Use 1fr for equal spacing */
        gap: 5px;
        border: 1px solid #000;
        padding: 10px;
        background-color: lightblue; /* Set a background color for better visibility */
    }

    .cell-container {
        display: flex; /* Use flexbox for centering */
        justify-content: center; /* Center horizontally */
        align-items: center; /* Center vertically */
        height: 50px; /* Ensure consistent height */
        width: 50px; /* Ensure consistent width */
    }

    .cell {
        width: 50px; /* Ensure consistent width */
        height: 50px; /* Ensure consistent height */
    }

    .x-cell {
        background-color: #f3b241; /* X player color */
    }

    .o-cell {
        background-color: #c7173b; /* O player color */
    }

    .active-board {
        background-color: lightgreen; /* Highlight active boards */
    }

    .winning-line-x {
        background-color: #f3b241; /* Highlight winning line for X */
    }

    .winning-line-o {
        background-color: #c7173b; /* Highlight winning line for O */
    }

    .no-winner {
        background-color: lightblue ; /* Highlight original color; */
    }

    .btn {
        padding: 10px 20px;
        background-color: #4CAF50; /* Green background */
        color: white; /* White text */
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin: 5px;
    }

    .btn:hover {
        background-color: #45a049; /* Darker green on hover */
    }

    .menu-item {
        margin: 10px 0;
    }

    
</style>